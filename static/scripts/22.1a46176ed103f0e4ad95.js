(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{0:function(e,t){},1:function(e,t){},Al62:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e,t){if(void 0===t&&(t={}),!e)return null;function n(e){}e.addEventListener("webglcontextcreationerror",n,!1);var r=e.getContext("webgl2",t);return(r=r||e.getContext("experimental-webgl2",t))||(r=(r=e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",n,!1),r},i=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;function o(){return Math.ceil(i)||1}},Djbh:function(e,t,n){"use strict";n.r(t),n.d(t,"COLOR_SCALE",(function(){return f}));var r=n("q1tI"),i=n.n(r),o=n("7GCR"),a=n("aw+z"),s=n("R1+Y"),c=n("cwYr"),l=n("Tl6c"),h=n("Xu7x"),u=n("8rZH"),d=n("Al62"),p=n("tjUo");function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=Object(a.a)().domain([-.6,-.45,-.3,-.15,0,.15,.3,.45,.6,.75,.9,1.05,1.2]).range([[65,182,196],[127,205,187],[199,233,180],[237,248,177],[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[189,0,38],[128,0,38]]),g=new l.a({color:[255,255,255],intensity:1}),w=new h.a({timestamp:Date.UTC(2019,7,1,22),color:[255,255,255],intensity:1,_shadow:!0}),m=[[[-123,49.196],[-123,49.324],[-123.306,49.324],[-123.306,49.196]]],y=function(e){function t(t,n){var r;(function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})(v(r=e.call(this,t,n)||this),"setRef",(function(e){void 0===e&&(e=null),r.container=e})),r.state={hoveredObject:null};var i=new u.a({ambientLight:g,dirLight:w});return i.shadowColor=[0,0,0,.5],r._effects=[i],r.container=null,r.map=null,r.inited=!1,r.deckLayer=null,r._onHover=r._onHover.bind(v(r)),r._renderTooltip=r._renderTooltip.bind(v(r)),r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.map=new o.Map(this.container,{center:[-123.13,49.254],zoom:11,pitch:45,bearing:0,maxZoom:16,centerCross:!0,baseLayer:new o.TileLayer("tile",{urlTemplate:"https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}"+(Object(d.b)()>1.5?"@2x":"")+"?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejh2N21nMzAxMmQzMnA5emRyN2lucW0ifQ.jSE-g2vsn48Ry928pqylcg"}),devicePixelRatio:1}),this._renderLayers()},n.componentWillUnmount=function(){this.deckLayer&&this.deckLayer.remove()},n._onHover=function(e){var t=e.x,n=e.y,r=e.object;this.setState({x:t,y:n,hoveredObject:r})},n._renderTooltip=function(){var e=this.state,t=e.x,n=e.y,r=e.hoveredObject;return r&&i.a.createElement("div",{className:"tooltip",style:{top:n,left:t}},i.a.createElement("div",null,i.a.createElement("b",null,"Average Property Value")),i.a.createElement("div",null,i.a.createElement("div",null,"$",r.properties.valuePerParcel," / parcel"),i.a.createElement("div",null,"$",r.properties.valuePerSqm," / m",i.a.createElement("sup",null,"2"))),i.a.createElement("div",null,i.a.createElement("b",null,"Growth")),i.a.createElement("div",null,Math.round(100*r.properties.growth),"%"))},n._renderLayers=function(){var e={layers:[new s.a({id:"ground",data:m,stroked:!1,getPolygon:function(e){return e},getFillColor:[0,0,0,0]}),new c.a({id:"geojson",data:"https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/geojson/vancouver-blocks.json",opacity:.8,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return 10*Math.sqrt(e.properties.valuePerSqm)},getFillColor:function(e){return f(e.properties.growth)},getLineColor:[255,255,255],pickable:!0,onHover:this._onHover})],effects:this._effects};this.inited?this.deckLayer&&this.deckLayer.setProps(e):(this.inited=!0,this.deckLayer=new p.a("deck",e,{animation:!1,renderer:"webgl"}),this.map.addLayer(this.deckLayer))},n.render=function(){return i.a.createElement("div",{ref:this.setRef,className:"map-content"},this._renderTooltip())},t}(i.a.Component);t.default=y},tjUo:function(e,t,n){"use strict";var r=n("zGfa"),i=n("mybv"),o=n("7GCR"),a=n("Al62");function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var c={registerEvents:!0,renderer:"webgl",doubleBuffer:!0,glOptions:{alpha:!0,depth:!0,antialias:!0,stencil:!0},forceRenderOnMoving:!0,forceRenderOnZooming:!0},l={useDevicePixels:!0,autoResizeDrawingBuffer:!1},h=12756274*Math.PI/(256*Math.pow(2,20));function u(e){var t=e.getResolution(),n=e.getMaxNativeZoom(),r=e.getCenter(),i=e.getPitch(),o=e.getBearing();return{latitude:r.y,longitude:r.x,zoom:function(e){return 19-Math.log(e/h)/Math.LN2}(t),bearing:o,pitch:i,maxZoom:n}}var d=function(e){function t(t,n,r){var i;return void 0===r&&(r={}),(i=e.call(this,t,Object.assign(c,r))||this).props=Object.assign({},l,n),i._isLoad=!1,i}s(t,e);var n=t.prototype;return n.setProps=function(e){return Object.assign(this.props,e,{id:this.id}),this},n.getProps=function(){return this.props},n.prepareToDraw=function(){},n.draw=function(){this.renderLayer()},n.drawOnInteracting=function(){this.renderLayer()},n.onAdd=function(){},n.onMouseClick=function(e){var t={};e.offsetCenter||(t={type:"click",offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onEvent(t)},n.onMouseMove=function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onPointerMove(t)},n.onMouseDown=function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onPointerDown(t)},n.onRemove=function(){},n.renderLayer=function(){var e=this,t=this.getMap(),n=this._getRenderer();if(n&&t){var r=this.props._customRender,o=n.gl,a=Object.assign(this.props,{gl:o,width:!1,height:!1,viewState:u(t),_customRender:function(){r&&r()},parameters:{depthMask:!0,depthTest:!0,blendFunc:[o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA],blendEquation:o.FUNC_ADD},userData:{isExternal:!1,layers:new Set},onLoad:function(){e._isLoad=!0,e._drawLayer(t)}});this.deck||this._isLoad||(this.deck=new i.a(a),this.options.registerEvents&&(t.on("mousemove",this.onMouseMove,this),t.on("mousedown",this.onMouseDown,this),t.on("click",this.onMouseClick,this))),this._isLoad&&(this.deck.setProps(a),this.deck.props.userData.isExternal=!0,this._drawLayer(t)),n.completeRender()}},n._drawLayer=function(e){var t=this.deck.props.userData.currentViewport;t||(t=function(e,t,n){return void 0===n&&(n=!0),new r.a(Object.assign({x:0,y:0,width:e.width,height:e.height},u(t),n?{nearZMultiplier:e.height?1/e.height:1,farZMultiplier:1.01}:{nearZMultiplier:.1,farZMultiplier:10}))}(this.deck,e,!0),this.deck.props.userData.currentViewport=t),this.deck.layerManager&&this.deck._drawLayers("maptalks-deck-repaint",{viewports:[t],clearCanvas:!1})},n.remove=function(){var t=this.getMap();this.deck&&t&&(this.options.registerEvents&&(t.off("mousemove",this.onMouseMove,this),t.off("mousedown",this.onMouseDown,this),t.off("click",this.onMouseClick,this)),this.deck.finalize(),delete this.deck),e.prototype.remove.call(this)},t}(o.CanvasLayer),p=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.draw=function(){this.prepareCanvas(),this.prepareDrawContext(),this._drawLayer()},n.needToRedraw=function(){var t=this.getMap();return!(t.isZooming()&&!t.getPitch())&&e.prototype.needToRedraw.call(this)},n.createCanvas=function(){if(!this.canvas&&!this.gl){var e=this.getMap(),t=e.getSize(),n=(e.getDevicePixelRatio?e.getDevicePixelRatio():Object(a.b)())||1,r=[n*t.width,n*t.height],i=r[0],s=r[1];this.canvas=o.Canvas.createCanvas(i,s,e.CanvasClass),this.canvas.style&&(this.canvas.style.width=t+"px",this.canvas.style.height=t+"px"),this.gl=Object(a.a)(this.canvas,this.layer.options.glOptions),this.onCanvasCreate(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}},n.resizeCanvas=function(e){if(this.canvas){var t=this.getMap(),n=(t.getDevicePixelRatio?t.getDevicePixelRatio():Object(a.b)())||1,r=e||t.getSize();this.canvas.width===r.width*n&&this.canvas.height===r.height*n||(this.canvas.height=n*r.height,this.canvas.width=n*r.width,this.gl.viewport(0,0,this.canvas.width,this.canvas.height))}},n.clearCanvas=function(){this.canvas&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height))},n.requestMapToRender=function(){this.setToRedraw()},n.prepareCanvas=function(){this.canvas?this.clearCanvas():this.createCanvas();var t=e.prototype.prepareCanvas.call(this);return this.layer.fire("renderstart",{context:this.context,gl:this.gl}),t},n.onZoomStart=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.prototype.onZoomStart.call(this,n)},n.onZoomEnd=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.prototype.onZoomEnd.call(this,n)},n.remove=function(){e.prototype.remove.call(this)},t}(o.renderer.CanvasLayerRenderer);d.registerRenderer("webgl",p),t.a=d}}]);