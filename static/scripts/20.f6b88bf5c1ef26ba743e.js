(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{0:function(e,t){},1:function(e,t){},Al62:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}));var n=function(e,t){if(void 0===t&&(t={}),!e)return null;function i(e){}e.addEventListener("webglcontextcreationerror",i,!1);var n=e.getContext("webgl2",t);return(n=n||e.getContext("experimental-webgl2",t))||(n=(n=e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),n},o=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;function r(){return Math.ceil(o)||1}},Z7v5:function(e,t,i){"use strict";i.r(t);var n=i("q1tI"),o=i("tjUo"),r=i("G8qk"),a=i("7GCR"),s=i("pCSj"),c=i("hO48"),h=i("Al62");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object(s.b)([c.a]);var u={latitude:40,longitude:-75,pitch:45,maxPitch:60,bearing:0,minZoom:2,maxZoom:30,zoom:17},d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlYWMxMzcyYy0zZjJkLTQwODctODNlNi01MDRkZmMzMjIxOWIiLCJpZCI6OTYyMCwic2NvcGVzIjpbImFzbCIsImFzciIsImdjIl0sImlhdCI6MTU2Mjg2NjI3M30.1FNiClUyk00YH_nWfSGpiQAjR5V2OvREDq1PJ5QMjWQ",v=function(e){function t(t,i){var n;return function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(p(n=e.call(this,t,i)||this),"setRef",(function(e){void 0===e&&(e=null),n.container=e})),n.state={viewState:u,attributions:[]},n.container=null,n.map=null,n.inited=!1,n.deckLayer=null,n._onTilesetLoad=n._onTilesetLoad.bind(p(n)),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var i=t.prototype;return i.componentDidMount=function(){this.map=new a.Map(this.container,{center:[-75,40],zoom:16,pitch:45,bearing:0,centerCross:!0,spatialReference:{projection:"EPSG:3857"},baseLayer:new a.TileLayer("tile",{urlTemplate:"https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}"+(Object(h.b)()>1.5?"@2x":"")+"?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejh2N21nMzAxMmQzMnA5emRyN2lucW0ifQ.jSE-g2vsn48Ry928pqylcg",spatialReference:{projection:"EPSG:3857"}})}),this.deckLayer=new o.a("deck",{layers:[new r.a({id:"tile-3d-layer",_ionAssetId:43978,_ionAccessToken:d,pointSize:2,onTilesetLoad:this._onTilesetLoad})]},{animation:!0,renderer:"webgl"}),this.map.addLayer(this.deckLayer),this.map.on("moving pitch resize zooming",this._onViewStateChange,this)},i.componentWillUnmount=function(){this.deckLayer&&this.deckLayer.remove()},i._onTilesetLoad=function(e){this.setState({attributions:e.credits.attributions}),this._centerViewOnTileset(e)},i._centerViewOnTileset=function(e){var t=e.cartographicCenter,i=e.zoom;this.setState({viewState:l({},this.state.viewState,{longitude:t[0],latitude:t[1],zoom:i+1.5,bearing:u.bearing,pitch:u.pitch})})},i._onViewStateChange=function(e){var t=this.map.getZoom(),i=this.map.getCenter().toArray(),n=this.map.getBearing(),o=this.map.getPitch();this.setState(l({},this.state.viewState,{longitude:i[0],latitude:i[1],zoom:t+1.5,bearing:n,pitch:o}))},i.render=function(){return this.deckLayer&&this.deckLayer.setProps({layers:[new r.a({id:"tile-3d-layer",_ionAssetId:43978,_ionAccessToken:d,pointSize:2,onTilesetLoad:this._onTilesetLoad})]}),n.createElement("div",{ref:this.setRef,className:"map-content"})},t}(n.Component);t.default=v},tjUo:function(e,t,i){"use strict";var n=i("zGfa"),o=i("mybv"),r=i("7GCR"),a=i("Al62");function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var c={registerEvents:!0,renderer:"webgl",doubleBuffer:!0,glOptions:{alpha:!0,depth:!0,antialias:!0,stencil:!0},forceRenderOnMoving:!0,forceRenderOnZooming:!0},h={useDevicePixels:!0,autoResizeDrawingBuffer:!1},l=12756274*Math.PI/(256*Math.pow(2,20));function p(e){var t=e.getResolution(),i=e.getMaxNativeZoom(),n=e.getCenter(),o=e.getPitch(),r=e.getBearing();return{latitude:n.y,longitude:n.x,zoom:function(e){return 19-Math.log(e/l)/Math.LN2}(t),bearing:r,pitch:o,maxZoom:i}}var u=function(e){function t(t,i,n){var o;return void 0===n&&(n={}),(o=e.call(this,t,Object.assign(c,n))||this).props=Object.assign({},h,i),o._isLoad=!1,o}s(t,e);var i=t.prototype;return i.setProps=function(e){return Object.assign(this.props,e,{id:this.id}),this},i.getProps=function(){return this.props},i.prepareToDraw=function(){},i.draw=function(){this.renderLayer()},i.drawOnInteracting=function(){this.renderLayer()},i.onAdd=function(){},i.onMouseClick=function(e){var t={};e.offsetCenter||(t={type:"click",offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onEvent(t)},i.onMouseMove=function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onPointerMove(t)},i.onMouseDown=function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onPointerDown(t)},i.onRemove=function(){},i.renderLayer=function(){var e=this,t=this.getMap(),i=this._getRenderer();if(i&&t){var n=this.props._customRender,r=i.gl,a=Object.assign(this.props,{gl:r,width:!1,height:!1,viewState:p(t),_customRender:function(){n&&n()},parameters:{depthMask:!0,depthTest:!0,blendFunc:[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],blendEquation:r.FUNC_ADD},userData:{isExternal:!1,layers:new Set},onLoad:function(){e._isLoad=!0,e._drawLayer(t)}});this.deck||this._isLoad||(this.deck=new o.a(a),this.options.registerEvents&&(t.on("mousemove",this.onMouseMove,this),t.on("mousedown",this.onMouseDown,this),t.on("click",this.onMouseClick,this))),this._isLoad&&(this.deck.setProps(a),this.deck.props.userData.isExternal=!0,this._drawLayer(t)),i.completeRender()}},i._drawLayer=function(e){var t=this.deck.props.userData.currentViewport;t||(t=function(e,t,i){return void 0===i&&(i=!0),new n.a(Object.assign({x:0,y:0,width:e.width,height:e.height},p(t),i?{nearZMultiplier:e.height?1/e.height:1,farZMultiplier:1.01}:{nearZMultiplier:.1,farZMultiplier:10}))}(this.deck,e,!0),this.deck.props.userData.currentViewport=t),this.deck.layerManager&&this.deck._drawLayers("maptalks-deck-repaint",{viewports:[t],clearCanvas:!1})},i.remove=function(){var t=this.getMap();this.deck&&t&&(this.options.registerEvents&&(t.off("mousemove",this.onMouseMove,this),t.off("mousedown",this.onMouseDown,this),t.off("click",this.onMouseClick,this)),this.deck.finalize(),delete this.deck),e.prototype.remove.call(this)},t}(r.CanvasLayer),d=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var i=t.prototype;return i.draw=function(){this.prepareCanvas(),this.prepareDrawContext(),this._drawLayer()},i.needToRedraw=function(){var t=this.getMap();return!(t.isZooming()&&!t.getPitch())&&e.prototype.needToRedraw.call(this)},i.createCanvas=function(){if(!this.canvas&&!this.gl){var e=this.getMap(),t=e.getSize(),i=(e.getDevicePixelRatio?e.getDevicePixelRatio():Object(a.b)())||1,n=[i*t.width,i*t.height],o=n[0],s=n[1];this.canvas=r.Canvas.createCanvas(o,s,e.CanvasClass),this.canvas.style&&(this.canvas.style.width=t+"px",this.canvas.style.height=t+"px"),this.gl=Object(a.a)(this.canvas,this.layer.options.glOptions),this.onCanvasCreate(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}},i.resizeCanvas=function(e){if(this.canvas){var t=this.getMap(),i=(t.getDevicePixelRatio?t.getDevicePixelRatio():Object(a.b)())||1,n=e||t.getSize();this.canvas.width===n.width*i&&this.canvas.height===n.height*i||(this.canvas.height=i*n.height,this.canvas.width=i*n.width,this.gl.viewport(0,0,this.canvas.width,this.canvas.height))}},i.clearCanvas=function(){this.canvas&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height))},i.requestMapToRender=function(){this.setToRedraw()},i.prepareCanvas=function(){this.canvas?this.clearCanvas():this.createCanvas();var t=e.prototype.prepareCanvas.call(this);return this.layer.fire("renderstart",{context:this.context,gl:this.gl}),t},i.onZoomStart=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.prototype.onZoomStart.call(this,i)},i.onZoomEnd=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];e.prototype.onZoomEnd.call(this,i)},i.remove=function(){e.prototype.remove.call(this)},t}(r.renderer.CanvasLayerRenderer);u.registerRenderer("webgl",d),t.a=u}}]);