(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{0:function(e,t){},1:function(e,t){},"3Xye":function(e,t,n){"use strict";n.r(t);var i=n("q1tI"),r=n("vDqi"),o=n.n(r),a=n("aSns"),s=n.n(a),c=n("tjUo"),h=n("y9sn"),l=n("7GCR"),u=n("Al62");function p(e){var t=e.x,n=e.y,i="http://58.87.95.84:3333/osm?z="+e.z+"&x="+t+"&y="+n;return o.a.get(i,{headers:{Pragma:"cache"}}).then((function(e){return e.data.features}))}var d=function(e){function t(t,n){var i;return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i=e.call(this,t,n)||this),"setRef",(function(e){void 0===e&&(e=null),i.container=e})),i.state={zoom:16,fov:0,pitch:0,bearing:0},i.container=null,i.map=null,i.inited=!1,i.deckLayer=null,i}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.map=new l.Map(this.container,{center:[13.41289,52.52057],zoom:16,pitch:60,bearing:0,centerCross:!0,maxPitch:60,maxVisualPitch:60,baseLayer:new l.TileLayer("tile",{urlTemplate:"https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}"+(Object(u.b)()>1.5?"@2x":"")+"?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejh2N21nMzAxMmQzMnA5emRyN2lucW0ifQ.jSE-g2vsn48Ry928pqylcg"})});var e=new h.a({stroked:!1,getLineColor:[192,192,192],extruded:!0,wireframe:!1,opacity:.8,getElevation:function(e){return e.properties.hasOwnProperty("height")?2*e.properties.height:10},getFillColor:function(e){return e.properties.hasOwnProperty("roofColor")?s()(e.properties.roofColor).rgb().array():[74,80,87]},lightSettings:{lightsPosition:[98.8469,34.74385,5e3,110.3516,32.12537,8e3,112.55302,32.50228,5e3],ambientRatio:.2,diffuseRatio:.5,specularRatio:.3,lightsStrength:[2,0,1,0],numberOfLights:3},getTileData:p});this.deckLayer=new c.a("deck",{layers:[e]},{minZoom:15,animation:!0,renderer:"webgl"}),this.map.addLayer(this.deckLayer)},n.componentWillUnmount=function(){this.deckLayer&&this.deckLayer.remove()},n.render=function(){return i.createElement("div",{ref:this.setRef,className:"map-content"})},t}(i.Component);t.default=d},Al62:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var i=function(e,t){if(void 0===t&&(t={}),!e)return null;function n(e){}e.addEventListener("webglcontextcreationerror",n,!1);var i=e.getContext("webgl2",t);return(i=i||e.getContext("experimental-webgl2",t))||(i=(i=e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",n,!1),i},r=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;function o(){return Math.ceil(r)||1}},tjUo:function(e,t,n){"use strict";var i=n("zGfa"),r=n("mybv"),o=n("7GCR"),a=n("Al62");function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var c={registerEvents:!0,renderer:"webgl",doubleBuffer:!0,glOptions:{alpha:!0,depth:!0,antialias:!0,stencil:!0},forceRenderOnMoving:!0,forceRenderOnZooming:!0},h={useDevicePixels:!0,autoResizeDrawingBuffer:!1},l=12756274*Math.PI/(256*Math.pow(2,20));function u(e){var t=e.getResolution(),n=e.getMaxNativeZoom(),i=e.getCenter(),r=e.getPitch(),o=e.getBearing();return{latitude:i.y,longitude:i.x,zoom:function(e){return 19-Math.log(e/l)/Math.LN2}(t),bearing:o,pitch:r,maxZoom:n}}var p=function(e){function t(t,n,i){var r;return void 0===i&&(i={}),(r=e.call(this,t,Object.assign(c,i))||this).props=Object.assign({},h,n),r._isLoad=!1,r}s(t,e);var n=t.prototype;return n.setProps=function(e){return Object.assign(this.props,e,{id:this.id}),this},n.getProps=function(){return this.props},n.prepareToDraw=function(){},n.draw=function(){this.renderLayer()},n.drawOnInteracting=function(){this.renderLayer()},n.onAdd=function(){},n.onMouseClick=function(e){var t={};e.offsetCenter||(t={type:"click",offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onEvent(t)},n.onMouseMove=function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onPointerMove(t)},n.onMouseDown=function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),this.deck._onPointerDown(t)},n.onRemove=function(){},n.renderLayer=function(){var e=this,t=this.getMap(),n=this._getRenderer();if(n&&t){var i=this.props._customRender,o=n.gl,a=Object.assign(this.props,{gl:o,width:!1,height:!1,viewState:u(t),_customRender:function(){i&&i()},parameters:{depthMask:!0,depthTest:!0,blendFunc:[o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA],blendEquation:o.FUNC_ADD},userData:{isExternal:!1,layers:new Set},onLoad:function(){e._isLoad=!0,e._drawLayer(t)}});this.deck||this._isLoad||(this.deck=new r.a(a),this.options.registerEvents&&(t.on("mousemove",this.onMouseMove,this),t.on("mousedown",this.onMouseDown,this),t.on("click",this.onMouseClick,this))),this._isLoad&&(this.deck.setProps(a),this.deck.props.userData.isExternal=!0,this._drawLayer(t)),n.completeRender()}},n._drawLayer=function(e){var t=this.deck.props.userData.currentViewport;t||(t=function(e,t,n){return void 0===n&&(n=!0),new i.a(Object.assign({x:0,y:0,width:e.width,height:e.height},u(t),n?{nearZMultiplier:e.height?1/e.height:1,farZMultiplier:1.01}:{nearZMultiplier:.1,farZMultiplier:10}))}(this.deck,e,!0),this.deck.props.userData.currentViewport=t),this.deck.layerManager&&this.deck._drawLayers("maptalks-deck-repaint",{viewports:[t],clearCanvas:!1})},n.remove=function(){var t=this.getMap();this.deck&&t&&(this.options.registerEvents&&(t.off("mousemove",this.onMouseMove,this),t.off("mousedown",this.onMouseDown,this),t.off("click",this.onMouseClick,this)),this.deck.finalize(),delete this.deck),e.prototype.remove.call(this)},t}(o.CanvasLayer),d=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var n=t.prototype;return n.draw=function(){this.prepareCanvas(),this.prepareDrawContext(),this._drawLayer()},n.needToRedraw=function(){var t=this.getMap();return!(t.isZooming()&&!t.getPitch())&&e.prototype.needToRedraw.call(this)},n.createCanvas=function(){if(!this.canvas&&!this.gl){var e=this.getMap(),t=e.getSize(),n=(e.getDevicePixelRatio?e.getDevicePixelRatio():Object(a.b)())||1,i=[n*t.width,n*t.height],r=i[0],s=i[1];this.canvas=o.Canvas.createCanvas(r,s,e.CanvasClass),this.canvas.style&&(this.canvas.style.width=t+"px",this.canvas.style.height=t+"px"),this.gl=Object(a.a)(this.canvas,this.layer.options.glOptions),this.onCanvasCreate(),this.layer.fire("canvascreate",{context:this.context,gl:this.gl})}},n.resizeCanvas=function(e){if(this.canvas){var t=this.getMap(),n=(t.getDevicePixelRatio?t.getDevicePixelRatio():Object(a.b)())||1,i=e||t.getSize();this.canvas.width===i.width*n&&this.canvas.height===i.height*n||(this.canvas.height=n*i.height,this.canvas.width=n*i.width,this.gl.viewport(0,0,this.canvas.width,this.canvas.height))}},n.clearCanvas=function(){this.canvas&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height))},n.requestMapToRender=function(){this.setToRedraw()},n.prepareCanvas=function(){this.canvas?this.clearCanvas():this.createCanvas();var t=e.prototype.prepareCanvas.call(this);return this.layer.fire("renderstart",{context:this.context,gl:this.gl}),t},n.onZoomStart=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.prototype.onZoomStart.call(this,n)},n.onZoomEnd=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.prototype.onZoomEnd.call(this,n)},n.remove=function(){e.prototype.remove.call(this)},t}(o.renderer.CanvasLayerRenderer);p.registerRenderer("webgl",d),t.a=p}}]);