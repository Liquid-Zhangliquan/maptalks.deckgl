(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{0:function(e,t){},1:function(e,t){},"1SlE":function(e,t,n){"use strict";n.r(t),n.d(t,"COLOR_SCALE",(function(){return v}));var r=n("q1tI"),i=n.n(r),o=n("7GCR"),a=n("aw+z"),l=n("R1+Y"),c=n("cwYr"),u=n("Tl6c"),s=n("Xu7x"),d=n("8rZH"),h=n("zGfa"),g=n("mybv"),f=n("Al62"),p="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/geojson/vancouver-blocks.json",v=Object(a.a)().domain([-.6,-.45,-.3,-.15,0,.15,.3,.45,.6,.75,.9,1.05,1.2]).range([[65,182,196],[127,205,187],[199,233,180],[237,248,177],[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[189,0,38],[128,0,38]]),w=49.254,m=-123.13,b=11,C=16,E=45,x=0,y=new u.a({color:[255,255,255],intensity:1}),P=new s.a({timestamp:Date.UTC(2019,7,1,22),color:[255,255,255],intensity:1,_shadow:!0}),k=[[[-123,49.196],[-123,49.324],[-123.306,49.324],[-123.306,49.196]]],j=new d.a({ambientLight:y,dirLight:P});j.shadowColor=[0,0,0,.5];var M=[j],S=12756274*Math.PI/(256*Math.pow(2,20));function O(e){var t=e.getResolution(),n=e.getMaxNativeZoom(),r=e.getCenter(),i=e.getPitch(),o=e.getBearing();return{latitude:r.y,longitude:r.x,zoom:function(e){return 19-Math.log(e/S)/Math.LN2}(t),bearing:o,pitch:i,maxZoom:n}}t.default=function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),a=Object(r.useState)(!1),u=a[0],s=a[1],d=Object(r.useState)(null),y=d[0],P=d[1],j=Object(r.useState)(0),S=j[0],R=j[1],_=Object(r.useState)(0),z=_[0],L=_[1],D=null,N=null;function A(e){var t=e.x,n=e.y,r=e.object;R(t),L(n),P(r)}var I=Object(r.useCallback)((function(){N.setProps({viewState:O(D),layers:[new l.a({id:"ground",data:k,stroked:!1,getPolygon:function(e){return e},getFillColor:[0,0,0,0]}),new c.a({id:"geojson",data:p,opacity:.8,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return 10*Math.sqrt(e.properties.valuePerSqm)},getFillColor:function(e){return v(e.properties.growth)},getLineColor:[255,255,255],pickable:!0,onHover:A})],width:!1,height:!1,effects:M,_customRender:function(){},userData:{isExternal:!1,layers:new Set},onLoad:I,useDevicePixels:!0,autoResizeDrawingBuffer:!1});var e=N.props.userData.currentViewport;e||(e=function(e,t,n){return void 0===n&&(n=!0),new h.a(Object.assign({x:0,y:0,width:e.width,height:e.height},O(t),n?{nearZMultiplier:e.height?1/e.height:1,farZMultiplier:1.01}:{nearZMultiplier:.1,farZMultiplier:10}))}(N,D,!0),N.props.userData.currentViewport=e),N.layerManager&&N._drawLayers("maptalks-deck-repaint",{viewports:[e],clearCanvas:!1})}),[]),q=Object(r.useCallback)((function(e){var t={};e.offsetCenter||(t={type:"click",offsetCenter:e.containerPoint,srcEvent:e.domEvent}),N&&N._onEvent(t)}),[]),F=Object(r.useCallback)((function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),N&&N._onPointerMove(t)}),[]),Z=Object(r.useCallback)((function(e){var t={};e.offsetCenter||(t={offsetCenter:e.containerPoint,srcEvent:e.domEvent}),N&&N._onPointerDown(t)}),[]);return Object(r.useEffect)((function(){if(u);else{var e=(D=new o.Map(t.current,{center:[m,w],zoom:b,pitch:E,bearing:x,maxZoom:C,centerCross:!0,baseLayer:new o.TileLayer("tile",{urlTemplate:"https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}"+(Object(f.b)()>1.5?"@2x":"")+"?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejh2N21nMzAxMmQzMnA5emRyN2lucW0ifQ.jSE-g2vsn48Ry928pqylcg"})})).getSize(),r=(D.getDevicePixelRatio?D.getDevicePixelRatio():Object(f.b)())||1,i=function(e,t){for(var n=["webgl2","webgl","experimental-webgl"],r=null,i=0;i<n.length;++i){try{r=e.getContext(n[i],t)}catch(e){}if(r)break}return r}(n.current,{alpha:!0,depth:!0,antialias:!0,stencil:!0});n.current.width===e.width*r&&n.current.height===e.height*r||(n.current.height=r*e.height,n.current.width=r*e.width,i.viewport(0,0,n.current.width,n.current.height)),g.a.prototype._checkForCanvasSizeChange=function(){var t=this.canvas;if(!t)return!1;var n=t.width/2||e.width,r=t.height/2||e.height;return(n!==this.width||r!==this.height)&&(this.width=n,this.height=r,!0)},N=new g.a({layers:[new l.a({id:"ground",data:k,stroked:!1,getPolygon:function(e){return e},getFillColor:[0,0,0,0]}),new c.a({id:"geojson",data:p,opacity:.8,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(e){return 10*Math.sqrt(e.properties.valuePerSqm)},getFillColor:function(e){return v(e.properties.growth)},getLineColor:[255,255,255],pickable:!0,onHover:A})],gl:i,width:!1,height:!1,effects:M,_customRender:function(){},parameters:{depthMask:!0,depthTest:!0,blendFunc:[i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA],blendEquation:i.FUNC_ADD},userData:{isExternal:!1,layers:new Set},viewState:O(D),onLoad:I,useDevicePixels:!0,autoResizeDrawingBuffer:!1}),D.on("moving resize pitch zooming",I),D.on("mousemove",F),D.on("mousedown",Z),D.on("click",q),s(!0)}return function(){D&&(D.remove(),D.off("moving resize pitch zooming",I),D.off("mousemove",F),D.off("mousedown",Z),D.off("click",q)),N&&N.finalize()}}),[]),i.a.createElement("div",{className:"map-wrap",style:{position:"relative"}},i.a.createElement("div",{ref:t,className:"map-content"}),y&&i.a.createElement("div",{className:"tooltip",style:{top:z,left:S}},i.a.createElement("div",null,i.a.createElement("b",null,"Average Property Value")),i.a.createElement("div",null,i.a.createElement("div",null,"$",y.properties.valuePerParcel," / parcel"),i.a.createElement("div",null,"$",y.properties.valuePerSqm," / m",i.a.createElement("sup",null,"2"))),i.a.createElement("div",null,i.a.createElement("b",null,"Growth")),i.a.createElement("div",null,Math.round(100*y.properties.growth),"%")),i.a.createElement("canvas",{ref:n,style:{position:"absolute",top:0,left:0,zIndex:2,pointerEvents:"none",width:"100%",height:"100%"}}))}},Al62:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(e,t){if(void 0===t&&(t={}),!e)return null;function n(e){}e.addEventListener("webglcontextcreationerror",n,!1);var r=e.getContext("webgl2",t);return(r=r||e.getContext("experimental-webgl2",t))||(r=(r=e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",n,!1),r},i=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;function o(){return Math.ceil(i)||1}}}]);